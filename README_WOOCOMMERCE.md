# Интеграция с WooCommerce API

Этот модуль позволяет автоматически загружать сгенерированные описания товаров в WooCommerce.

## Настройка

### 1. Создание API ключей в WooCommerce

1. Войдите в админ-панель вашего WooCommerce сайта.
2. Перейдите в **WooCommerce** → **Settings** → **Advanced** → **REST API**.
3. Нажмите на кнопку **Add key**.
4. Укажите:
   - **Description**: `Product Description Generator` (или любое другое описание)
   - **Permissions**: `Read/Write` (требуется для обновления описаний)
   - **User**: выберите пользователя с правами администратора
5. Нажмите **Generate API key**.
6. Скопируйте сгенерированные **Consumer Key** и **Consumer Secret** — они понадобятся на следующем шаге.

### 2. Создание файла .env

1. Создайте файл `.env` в корневой директории проекта (в папке `one-product-generator`).
2. Добавьте в файл следующие строки:

```
WOOCOMMERCE_URL=https://yourdomain.com
WOOCOMMERCE_KEY=ck_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
WOOCOMMERCE_SECRET=cs_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

Где:
- `WOOCOMMERCE_URL` — URL вашего сайта без слеша в конце.
- `WOOCOMMERCE_KEY` — Consumer Key, полученный на предыдущем шаге.
- `WOOCOMMERCE_SECRET` — Consumer Secret, полученный на предыдущем шаге.

## Использование

### Загрузка описания в WooCommerce

Существует два способа загрузки описаний в WooCommerce:

#### 1. Автоматический поиск ID товара по названию

```bash
node generate_for_product.js "Название товара" --woo
```

Скрипт автоматически:
1. Найдет товар по названию в WooCommerce
2. Получит его ID
3. Обновит описание товара

#### 2. Явное указание ID товара

```bash
node generate_for_product.js "Название товара" --woo 1234
```

Где `1234` — ID товара в WooCommerce.

## Поиск ID товара

Если вам нужно найти ID товара в WooCommerce без генерации описания, используйте:

```bash
node find_product_id.js "Название товара"
```

## Обновление описания товара с известным ID

Если у вас уже есть HTML-файл с описанием, вы можете загрузить его напрямую:

```bash
node update_woo_product.js "Название товара" --id 1234
```

## Диагностика проблем

### Проблемы с подключением

Если не удается подключиться к WooCommerce API:

1. Проверьте правильность данных в файле `.env`.
2. Убедитесь, что URL сайта указан без слеша в конце.
3. Проверьте, что API ключи скопированы корректно.
4. Убедитесь, что у API ключа есть разрешения на чтение и запись (`Read/Write`).
5. Проверьте, что ваш сайт доступен и отвечает на запросы.

### Ошибки при обновлении описаний

Если при обновлении описания возникают ошибки:

1. Убедитесь, что товар с указанным ID существует в WooCommerce.
2. Проверьте логи в консоли для получения подробной информации об ошибке.
3. Убедитесь, что размер HTML-описания не превышает ограничений сервера.

## Расширенные возможности

### Массовое обновление описаний

Для массового обновления описаний товаров используйте:

```bash
node generate_batch.js --woo
```

Скрипт будет обрабатывать товары из файла `product_list.txt` и автоматически искать их ID в WooCommerce.

### Проверка существования товара

```bash
node find_product_id.js "Название товара"
```

## Безопасность

- Никогда не публикуйте файл `.env` в публичных репозиториях.
- Регулярно обновляйте API ключи, особенно если они могли быть скомпрометированы.
- Используйте HTTPS для всех запросов к WooCommerce API.

## 6. Дополнительная информация

- [Официальная документация WooCommerce REST API](https://woocommerce.github.io/woocommerce-rest-api-docs/)
- [Документация по WordPress REST API](https://developer.wordpress.org/rest-api/) 